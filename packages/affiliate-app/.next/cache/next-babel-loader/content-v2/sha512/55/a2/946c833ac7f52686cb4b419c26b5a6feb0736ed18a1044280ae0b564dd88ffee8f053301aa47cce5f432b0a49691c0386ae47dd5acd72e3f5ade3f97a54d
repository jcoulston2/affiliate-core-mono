{"ast":null,"code":"import _objectWithoutProperties from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport isEmpty from 'lodash/isEmpty';\nexport default function useForm(initialValues, validationSchema) {\n  _s();\n\n  var _useState = useState(initialValues),\n      formValues = _useState[0],\n      setFormValues = _useState[1];\n\n  var _useState2 = useState({}),\n      errors = _useState2[0],\n      setErrors = _useState2[1];\n\n  var onChangeHandler = function onChangeHandler(key) {\n    return function (_ref) {\n      var target = _ref.target;\n      setFormValues(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, key, target === null || target === void 0 ? void 0 : target.value));\n      });\n    };\n  };\n\n  var getValidationResult = function getValidationResult(key, value) {\n    return validationSchema[key] && validationSchema[key](value);\n  };\n\n  var validate = function validate(key, val) {\n    return function (event) {\n      var _event$target;\n\n      var value = val || (event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.value) || formValues[key];\n      var ValidationResult = getValidationResult(key, value);\n\n      if (ValidationResult) {\n        setErrors(_objectSpread(_objectSpread({}, errors), {}, _defineProperty({}, key, ValidationResult)));\n      } else {\n        var _omit = errors[key],\n            rest = _objectWithoutProperties(errors, [key].map(_toPropertyKey));\n\n        setErrors(rest);\n      }\n    };\n  };\n\n  var validateOnSubmit = function validateOnSubmit() {\n    return Object.keys(formValues).reduce(function (acc, cur) {\n      var ValidationResult = getValidationResult(cur, formValues[cur]);\n      return ValidationResult ? _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, cur, ValidationResult)) : acc;\n    }, {});\n  };\n\n  var submitForm = function submitForm(cb) {\n    var errorResult = validateOnSubmit();\n    setErrors(errorResult);\n\n    if (isEmpty(errorResult)) {\n      cb(formValues);\n    }\n  };\n\n  return {\n    formValues: formValues,\n    onChangeHandler: onChangeHandler,\n    errors: errors,\n    submitForm: submitForm,\n    validate: validate\n  };\n}\n\n_s(useForm, \"tuQ6VJpX13ckhVTkB0hydU2gsJQ=\");","map":{"version":3,"sources":["/Users/justincoulston/Desktop/affilaite-core-mono/packages/affiliate-app/hooks/useForm.js"],"names":["useState","isEmpty","useForm","initialValues","validationSchema","formValues","setFormValues","errors","setErrors","onChangeHandler","key","target","state","value","getValidationResult","validate","val","event","ValidationResult","_omit","rest","validateOnSubmit","Object","keys","reduce","acc","cur","submitForm","cb","errorResult"],"mappings":";;;;;;;;;;;;;AACA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AAMA,eAAe,SAASC,OAAT,CACbC,aADa,EAEbC,gBAFa,EAGb;AAAA;;AAAA,kBACoCJ,QAAQ,CAACG,aAAD,CAD5C;AAAA,MACOE,UADP;AAAA,MACmBC,aADnB;;AAAA,mBAE4BN,QAAQ,CAAC,EAAD,CAFpC;AAAA,MAEOO,MAFP;AAAA,MAEeC,SAFf;;AAGA,MAAMC,eAAe,GACnB,SADIA,eACJ,CAACC,GAAD;AAAA,WACE,gBAAwB;AAAA,UAArBC,MAAqB,QAArBA,MAAqB;AACtBL,MAAAA,aAAa,CAAC,UAACM,KAAD;AAAA,+CAAiBA,KAAjB,2BAAyBF,GAAzB,EAA+BC,MAA/B,aAA+BA,MAA/B,uBAA+BA,MAAM,CAAEE,KAAvC;AAAA,OAAD,CAAb;AACD,KAHH;AAAA,GADF;;AAMA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACJ,GAAD,EAAcG,KAAd,EAAsC;AAChE,WAAOT,gBAAgB,CAACM,GAAD,CAAhB,IAAyBN,gBAAgB,CAACM,GAAD,CAAhB,CAAsBG,KAAtB,CAAhC;AACD,GAFD;;AAKA,MAAME,QAAQ,GACZ,SADIA,QACJ,CAACL,GAAD,EAAcM,GAAd;AAAA,WACE,UAACC,KAAD,EAAyB;AAAA;;AACvB,UAAMJ,KAAK,GAAGG,GAAG,KAAIC,KAAJ,aAAIA,KAAJ,wCAAIA,KAAK,CAAEN,MAAX,kDAAI,cAAeE,KAAnB,CAAH,IAA+BR,UAAU,CAACK,GAAD,CAAvD;AACA,UAAMQ,gBAAgB,GAAGJ,mBAAmB,CAACJ,GAAD,EAAMG,KAAN,CAA5C;;AAEA,UAAIK,gBAAJ,EAAsB;AACpBV,QAAAA,SAAS,iCACJD,MADI,2BAENG,GAFM,EAEAQ,gBAFA,GAAT;AAID,OALD,MAKO;AAAA,YACUC,KADV,GAC6BZ,MAD7B,CACIG,GADJ;AAAA,YACoBU,IADpB,4BAC6Bb,MAD7B,GACIG,GADJ;;AAELF,QAAAA,SAAS,CAACY,IAAD,CAAT;AACD;AACF,KAdH;AAAA,GADF;;AAiBA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAyB;AAChD,WAAOC,MAAM,CAACC,IAAP,CAAYlB,UAAZ,EAAwBmB,MAAxB,CAA+B,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClD,UAAMR,gBAAgB,GAAGJ,mBAAmB,CAACY,GAAD,EAAMrB,UAAU,CAACqB,GAAD,CAAhB,CAA5C;AACA,aAAOR,gBAAgB,mCAAQO,GAAR,2BAAcC,GAAd,EAAoBR,gBAApB,KAAyCO,GAAhE;AACD,KAHM,EAGJ,EAHI,CAAP;AAID,GALD;;AAOA,MAAME,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD,EAAwB;AACzC,QAAMC,WAAW,GAAGR,gBAAgB,EAApC;AACAb,IAAAA,SAAS,CAACqB,WAAD,CAAT;;AAEA,QAAI5B,OAAO,CAAC4B,WAAD,CAAX,EAA0B;AACxBD,MAAAA,EAAE,CAACvB,UAAD,CAAF;AACD;AACF,GAPD;;AASA,SAAO;AAAEA,IAAAA,UAAU,EAAVA,UAAF;AAAcI,IAAAA,eAAe,EAAfA,eAAd;AAA+BF,IAAAA,MAAM,EAANA,MAA/B;AAAuCoB,IAAAA,UAAU,EAAVA,UAAvC;AAAmDZ,IAAAA,QAAQ,EAARA;AAAnD,GAAP;AACD;;GAnDuBb,O","sourcesContent":["//@flow\nimport { useState } from 'react';\nimport isEmpty from 'lodash/isEmpty';\n\n\n\n\n\nexport default function useForm(\n  initialValues: { [string]: any },\n  validationSchema: { [string]: Function }\n) {\n  const [formValues, setFormValues] = useState(initialValues);\n  const [errors, setErrors] = useState({});\n  const onChangeHandler =\n    (key: string) =>\n      ({ target }: Object) => {\n        setFormValues((state) => ({ ...state, [key]: target?.value }));\n      };\n\n  const getValidationResult = (key: string, value: any): ?string => {\n    return validationSchema[key] && validationSchema[key](value);\n  };\n\n\n  const validate =\n    (key: string, val: any) =>\n      (event: Object): void => {\n        const value = val || event?.target?.value || formValues[key];\n        const ValidationResult = getValidationResult(key, value);\n\n        if (ValidationResult) {\n          setErrors({\n            ...errors,\n            [key]: ValidationResult,\n          });\n        } else {\n          const { [key]: _omit, ...rest } = errors;\n          setErrors(rest);\n        }\n      };\n\n  const validateOnSubmit = (): { [string]: any } => {\n    return Object.keys(formValues).reduce((acc, cur) => {\n      const ValidationResult = getValidationResult(cur, formValues[cur]);\n      return ValidationResult ? { ...acc, [cur]: ValidationResult } : acc;\n    }, {});\n  };\n\n  const submitForm = (cb: Function): void => {\n    const errorResult = validateOnSubmit();\n    setErrors(errorResult);\n\n    if (isEmpty(errorResult)) {\n      cb(formValues);\n    }\n  };\n\n  return { formValues, onChangeHandler, errors, submitForm, validate };\n}\n"]},"metadata":{},"sourceType":"module"}