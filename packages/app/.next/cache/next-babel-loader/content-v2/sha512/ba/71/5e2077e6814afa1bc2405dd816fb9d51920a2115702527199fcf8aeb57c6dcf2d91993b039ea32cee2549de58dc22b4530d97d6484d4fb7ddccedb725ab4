{"ast":null,"code":"var _jsxFileName = \"/Users/justincoulston/Desktop/affilaite-core-mono/packages/app/components/modules/ProductWishList/ProductWishListAction.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport styled, { keyframes } from 'styled-components';\nimport { useWishListAction } from '@hooks';\nimport { isServer } from '@helpers/common';\nimport { getSavedPoductLinks } from './helper';\nexport var wishListAnimation = keyframes([\"0%{transform:scale(0);}50%{transform:scale(2.2);}100%{transform:scale(0);}\"]);\nvar WishListButton = styled(FavoriteIcon).withConfig({\n  displayName: \"ProductWishListAction__WishListButton\",\n  componentId: \"sc-1ade7hd-0\"\n})([\"&&{font-size:\", \";cursor:pointer;&:hover{opacity:0.5;}}\"], function (props) {\n  return props.fontSize;\n});\n_c = WishListButton;\nvar WishListAnimation = styled(FavoriteIcon).withConfig({\n  displayName: \"ProductWishListAction__WishListAnimation\",\n  componentId: \"sc-1ade7hd-1\"\n})([\"position:absolute;animation-name:\", \";animation-duration:0.5s;\"], wishListAnimation);\n_c2 = WishListAnimation;\nexport default function ProductWishListAction(_ref) {\n  _s();\n\n  var product = _ref.product,\n      iconSize = _ref.iconSize;\n\n  var _useState = useState(false),\n      wishListAnimate = _useState[0],\n      setWishListAnimate = _useState[1];\n\n  var _useState2 = useState(false),\n      wishListAdded = _useState2[0],\n      setWishListAdded = _useState2[1];\n\n  var link = product.topLevelData.link;\n  var savedProducts = useSelector(function (store) {\n    var _store$wishListState;\n\n    return (_store$wishListState = store.wishListState) === null || _store$wishListState === void 0 ? void 0 : _store$wishListState.savedProducts;\n  });\n  var savedProductLinks = getSavedPoductLinks(savedProducts);\n  var isSaved = savedProductLinks === null || savedProductLinks === void 0 ? void 0 : savedProductLinks.includes(link);\n  var wishListAction = useWishListAction(isSaved ? 'remove' : 'add');\n  var isClient = !isServer();\n\n  var wishListOnClick = function wishListOnClick() {\n    if (!wishListAnimate) setWishListAnimate(true);\n    wishListAction(product);\n    setTimeout(function () {\n      setWishListAnimate(false);\n    }, 500);\n  }; // The wishlist or \"saved products\" is persisted in browser local storage. This will not be accessible during build time, this\n  // means we'll have to rely on client side logic to detect whether a product has already been added to the wishlist. We do this\n  // in the following useEffect, ensuring these checks are invoked on the client only\n\n\n  useEffect(function () {\n    if (isClient) setWishListAdded(isSaved);\n  }, [isSaved]);\n  return __jsx(React.Fragment, null, wishListAnimate && __jsx(WishListAnimation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 27\n    }\n  }), __jsx(WishListButton, {\n    isSaved: isSaved,\n    fontSize: iconSize || '32px',\n    onClick: wishListOnClick,\n    color: wishListAdded ? 'primary' : 'inherit',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(ProductWishListAction, \"GTJmIifTMCn6HQR84v9MqX33xLc=\", false, function () {\n  return [useSelector, useWishListAction];\n});\n\n_c3 = ProductWishListAction;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"WishListButton\");\n$RefreshReg$(_c2, \"WishListAnimation\");\n$RefreshReg$(_c3, \"ProductWishListAction\");","map":{"version":3,"sources":["/Users/justincoulston/Desktop/affilaite-core-mono/packages/app/components/modules/ProductWishList/ProductWishListAction.js"],"names":["React","useState","useEffect","useSelector","FavoriteIcon","styled","keyframes","useWishListAction","isServer","getSavedPoductLinks","wishListAnimation","WishListButton","props","fontSize","WishListAnimation","ProductWishListAction","product","iconSize","wishListAnimate","setWishListAnimate","wishListAdded","setWishListAdded","link","topLevelData","savedProducts","store","wishListState","savedProductLinks","isSaved","includes","wishListAction","isClient","wishListOnClick","setTimeout"],"mappings":";;;;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,OAAOC,MAAP,IAAiBC,SAAjB,QAAkC,mBAAlC;AACA,SAASC,iBAAT,QAAkC,QAAlC;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,mBAAT,QAAoC,UAApC;AAEA,OAAO,IAAMC,iBAAiB,GAAGJ,SAAH,gFAAvB;AAMP,IAAMK,cAAc,GAAGN,MAAM,CAACD,YAAD,CAAT;AAAA;AAAA;AAAA,gEAEH,UAACQ,KAAD;AAAA,SAAWA,KAAK,CAACC,QAAjB;AAAA,CAFG,CAApB;KAAMF,c;AAUN,IAAMG,iBAAiB,GAAGT,MAAM,CAACD,YAAD,CAAT;AAAA;AAAA;AAAA,uEAEHM,iBAFG,CAAvB;MAAMI,iB;AAWN,eAAe,SAASC,qBAAT,OAAkF;AAAA;;AAAA,MAAjDC,OAAiD,QAAjDA,OAAiD;AAAA,MAAxCC,QAAwC,QAAxCA,QAAwC;;AAAA,kBACjDhB,QAAQ,CAAC,KAAD,CADyC;AAAA,MACxFiB,eADwF;AAAA,MACvEC,kBADuE;;AAAA,mBAErDlB,QAAQ,CAAC,KAAD,CAF6C;AAAA,MAExFmB,aAFwF;AAAA,MAEzEC,gBAFyE;;AAAA,MAGvFC,IAHuF,GAG9EN,OAAO,CAACO,YAHsE,CAGvFD,IAHuF;AAI/F,MAAME,aAAa,GAAGrB,WAAW,CAAC,UAACsB,KAAD;AAAA;;AAAA,mCAAWA,KAAK,CAACC,aAAjB,yDAAW,qBAAqBF,aAAhC;AAAA,GAAD,CAAjC;AACA,MAAMG,iBAAiB,GAAGlB,mBAAmB,CAACe,aAAD,CAA7C;AACA,MAAMI,OAAO,GAAGD,iBAAH,aAAGA,iBAAH,uBAAGA,iBAAiB,CAAEE,QAAnB,CAA4BP,IAA5B,CAAhB;AACA,MAAMQ,cAAc,GAAGvB,iBAAiB,CAACqB,OAAO,GAAG,QAAH,GAAc,KAAtB,CAAxC;AACA,MAAMG,QAAQ,GAAG,CAACvB,QAAQ,EAA1B;;AACA,MAAMwB,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAClC,QAAI,CAACd,eAAL,EAAsBC,kBAAkB,CAAC,IAAD,CAAlB;AACtBW,IAAAA,cAAc,CAACd,OAAD,CAAd;AACAiB,IAAAA,UAAU,CAAC,YAAM;AACfd,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,KAFS,EAEP,GAFO,CAAV;AAGD,GAND,CAT+F,CAiB/F;AACA;AACA;;;AACAjB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI6B,QAAJ,EAAcV,gBAAgB,CAACO,OAAD,CAAhB;AACf,GAFQ,EAEN,CAACA,OAAD,CAFM,CAAT;AAIA,SACE,4BACGV,eAAe,IAAI,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADtB,EAEE,MAAC,cAAD;AACE,IAAA,OAAO,EAAEU,OADX;AAEE,IAAA,QAAQ,EAAEX,QAAQ,IAAI,MAFxB;AAGE,IAAA,OAAO,EAAEe,eAHX;AAIE,IAAA,KAAK,EAAEZ,aAAa,GAAG,SAAH,GAAe,SAJrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAWD;;GAnCuBL,qB;UAIAZ,W,EAGCI,iB;;;MAPDQ,qB","sourcesContent":["//@flow\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { type ProductData } from '@types/product';\nimport styled, { keyframes } from 'styled-components';\nimport { useWishListAction } from '@hooks';\nimport { isServer } from '@helpers/common';\nimport { getSavedPoductLinks } from './helper';\n\nexport const wishListAnimation = keyframes`\n  0% { transform: scale(0); }\n  50% { transform: scale(2.2); }\n  100% { transform: scale(0); }\n `;\n\nconst WishListButton = styled(FavoriteIcon)`\n  && {\n    font-size: ${(props) => props.fontSize};\n    cursor: pointer;\n    &:hover {\n      opacity: 0.5;\n    }\n  }\n`;\n\nconst WishListAnimation = styled(FavoriteIcon)`\n  position: absolute;\n  animation-name: ${wishListAnimation};\n  animation-duration: 0.5s;\n`;\n\ntype ProductWishListActionProps = {\n  product: ProductData,\n  iconSize?: string,\n};\n\nexport default function ProductWishListAction({ product, iconSize }: ProductWishListActionProps) {\n  const [wishListAnimate, setWishListAnimate] = useState(false);\n  const [wishListAdded, setWishListAdded] = useState(false);\n  const { link } = product.topLevelData;\n  const savedProducts = useSelector((store) => store.wishListState?.savedProducts);\n  const savedProductLinks = getSavedPoductLinks(savedProducts);\n  const isSaved = savedProductLinks?.includes(link);\n  const wishListAction = useWishListAction(isSaved ? 'remove' : 'add');\n  const isClient = !isServer();\n  const wishListOnClick = (): void => {\n    if (!wishListAnimate) setWishListAnimate(true);\n    wishListAction(product);\n    setTimeout(() => {\n      setWishListAnimate(false);\n    }, 500);\n  };\n\n  // The wishlist or \"saved products\" is persisted in browser local storage. This will not be accessible during build time, this\n  // means we'll have to rely on client side logic to detect whether a product has already been added to the wishlist. We do this\n  // in the following useEffect, ensuring these checks are invoked on the client only\n  useEffect(() => {\n    if (isClient) setWishListAdded(isSaved);\n  }, [isSaved]);\n\n  return (\n    <>\n      {wishListAnimate && <WishListAnimation />}\n      <WishListButton\n        isSaved={isSaved}\n        fontSize={iconSize || '32px'}\n        onClick={wishListOnClick}\n        color={wishListAdded ? 'primary' : 'inherit'}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}