{"ast":null,"code":"import _defineProperty from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { normalizeFilters } from '@modules/Filters/helper';\nimport { useCms } from '@hooks';\nimport { toArrayNullable, stringifySafe } from '@helpers/common';\nimport { useRouter } from 'next/router';\nimport { isSearch } from './helper';\nexport default function useFilters(defaults) {\n  _s();\n\n  var router = useRouter();\n  var isSearchPage = isSearch(router);\n\n  var _useCms = useCms('listingContent'),\n      productFiltersContent = _useCms.productFiltersContent;\n\n  var scaler = productFiltersContent.sliderPriceScaleMultiplier;\n\n  var _useState = useState(false),\n      filterDrawOpen = _useState[0],\n      setFilterDrawOpen = _useState[1];\n\n  var _useState2 = useState('recommended'),\n      priceSort = _useState2[0],\n      setPriceSort = _useState2[1];\n\n  var _useState3 = useState([]),\n      keyWords = _useState3[0],\n      setKeyWords = _useState3[1];\n\n  var _useState4 = useState(null),\n      saleThreshold = _useState4[0],\n      setSaleThreshold = _useState4[1];\n\n  var _useState5 = useState(null),\n      hasTouchedSlider = _useState5[0],\n      setHasTouchedSlider = _useState5[1];\n\n  var _useState6 = useState(false),\n      filterRefresh = _useState6[0],\n      triggerFilterRefresh = _useState6[1];\n\n  var _useState7 = useState([0, 100]),\n      priceThreshold = _useState7[0],\n      setPriceThreshold = _useState7[1];\n\n  var _useState8 = useState([]),\n      brands = _useState8[0],\n      setBrands = _useState8[1];\n\n  var _useState9 = useState([]),\n      category = _useState9[0],\n      setCategory = _useState9[1];\n\n  var _useState10 = useState(null),\n      section = _useState10[0],\n      setSection = _useState10[1];\n\n  var setDefaultFilters = function setDefaultFilters() {\n    if (!defaults) return;\n    setHasTouchedSlider(!!(defaults.priceThresholdLow || defaults.priceThresholdHigh));\n    setPriceSort(defaults.priceSort || 'recommended');\n    setKeyWords(toArrayNullable(defaults.keyWords) || []);\n    setSaleThreshold(stringifySafe(defaults.saleThreshold));\n    setBrands(toArrayNullable(defaults.brands) || []);\n    setCategory(toArrayNullable(defaults.category) || []);\n    setSection(defaults.section || null);\n    setPriceThreshold([parseInt(defaults.priceThresholdLow) / scaler || 0, parseInt(defaults.priceThresholdHigh) / scaler || 100]);\n  };\n\n  useEffect(function () {\n    setDefaultFilters();\n  }, [defaults]);\n  var searchFilters = isSearchPage ? {\n    category: category,\n    section: section\n  } : {};\n  var filterMethods = {\n    setPriceSort: setPriceSort,\n    setPriceThreshold: setPriceThreshold,\n    setKeyWords: setKeyWords,\n    setSaleThreshold: setSaleThreshold,\n    setFilterDrawOpen: setFilterDrawOpen,\n    setHasTouchedSlider: setHasTouchedSlider,\n    triggerFilterRefresh: triggerFilterRefresh,\n    setBrands: setBrands,\n    setCategory: setCategory,\n    setSection: setSection\n  };\n\n  var filterState = _objectSpread({\n    filterDrawOpen: filterDrawOpen,\n    priceSort: priceSort,\n    keyWords: keyWords,\n    saleThreshold: saleThreshold,\n    hasTouchedSlider: hasTouchedSlider,\n    filterRefresh: filterRefresh,\n    priceThreshold: priceThreshold,\n    brands: brands\n  }, searchFilters);\n\n  var normalizedFilters = normalizeFilters(_objectSpread({\n    priceSort: priceSort,\n    priceThreshold: priceThreshold,\n    keyWords: keyWords,\n    saleThreshold: saleThreshold,\n    scaler: scaler,\n    hasTouchedSlider: hasTouchedSlider,\n    brands: brands\n  }, searchFilters), isSearchPage);\n  return {\n    filterMethods: filterMethods,\n    filterState: filterState,\n    normalizedFilters: normalizedFilters\n  };\n}\n\n_s(useFilters, \"Di+rLu/+rjEZyTEqKo3MTY5bh7s=\", false, function () {\n  return [useRouter, useCms];\n});","map":{"version":3,"sources":["/Users/justincoulston/Desktop/affilaite-core-mono/packages/app/components/modules/Filters/hook.js"],"names":["useState","useEffect","normalizeFilters","useCms","toArrayNullable","stringifySafe","useRouter","isSearch","useFilters","defaults","router","isSearchPage","productFiltersContent","scaler","sliderPriceScaleMultiplier","filterDrawOpen","setFilterDrawOpen","priceSort","setPriceSort","keyWords","setKeyWords","saleThreshold","setSaleThreshold","hasTouchedSlider","setHasTouchedSlider","filterRefresh","triggerFilterRefresh","priceThreshold","setPriceThreshold","brands","setBrands","category","setCategory","section","setSection","setDefaultFilters","priceThresholdLow","priceThresholdHigh","parseInt","searchFilters","filterMethods","filterState","normalizedFilters"],"mappings":"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","sourcesContent":["//@flow\nimport { useState, useEffect } from 'react';\nimport { normalizeFilters } from '@modules/Filters/helper';\nimport { type NormalizeFiltersOutput } from './types';\nimport { useCms } from '@hooks';\nimport { type Filters as FilterType } from '@types/product';\nimport { toArrayNullable, stringifySafe } from '@helpers/common';\nimport { useRouter } from 'next/router';\nimport { isSearch } from './helper';\n\nexport type UseFilters = {\n  filterMethods: { [string]: Function },\n  filterState: {\n    priceSort: string,\n    keyWords: Array<string>,\n    saleThreshold: number,\n    priceThreshold: Array<number>,\n    filterDrawOpen: boolean,\n    hasTouchedSlider: boolean,\n    filterRefresh: boolean,\n    brands: Array<string>,\n  },\n  normalizedFilters: NormalizeFiltersOutput,\n};\n\nexport default function useFilters(defaults: ?FilterType): UseFilters {\n  const router = useRouter();\n  const isSearchPage = isSearch(router);\n  const { productFiltersContent } = useCms('listingContent');\n  const { sliderPriceScaleMultiplier: scaler } = productFiltersContent;\n  const [filterDrawOpen, setFilterDrawOpen] = useState<any>(false);\n  const [priceSort, setPriceSort] = useState<any>('recommended');\n  const [keyWords, setKeyWords] = useState<any>([]);\n  const [saleThreshold, setSaleThreshold] = useState<any>(null);\n  const [hasTouchedSlider, setHasTouchedSlider] = useState<any>(null);\n  const [filterRefresh, triggerFilterRefresh] = useState<any>(false);\n  const [priceThreshold, setPriceThreshold] = useState<any>([0, 100]);\n  const [brands, setBrands] = useState<any>([]);\n  const [category, setCategory] = useState<any>([]);\n  const [section, setSection] = useState<any>(null);\n\n  const setDefaultFilters = (): void => {\n    if (!defaults) return;\n    setHasTouchedSlider(!!(defaults.priceThresholdLow || defaults.priceThresholdHigh));\n    setPriceSort(defaults.priceSort || 'recommended');\n    setKeyWords(toArrayNullable(defaults.keyWords) || []);\n    setSaleThreshold(stringifySafe(defaults.saleThreshold));\n    setBrands(toArrayNullable(defaults.brands) || []);\n    setCategory(toArrayNullable(defaults.category) || []);\n    setSection(defaults.section || null);\n    setPriceThreshold([\n      parseInt(defaults.priceThresholdLow) / scaler || 0,\n      parseInt(defaults.priceThresholdHigh) / scaler || 100,\n    ]);\n  };\n\n  useEffect(() => {\n    setDefaultFilters();\n  }, [defaults]);\n\n  const searchFilters = isSearchPage ? { category, section } : {};\n  const filterMethods = {\n    setPriceSort,\n    setPriceThreshold,\n    setKeyWords,\n    setSaleThreshold,\n    setFilterDrawOpen,\n    setHasTouchedSlider,\n    triggerFilterRefresh,\n    setBrands,\n    setCategory,\n    setSection,\n  };\n\n  const filterState = {\n    filterDrawOpen,\n    priceSort,\n    keyWords,\n    saleThreshold,\n    hasTouchedSlider,\n    filterRefresh,\n    priceThreshold,\n    brands,\n    ...searchFilters,\n  };\n\n  const normalizedFilters: NormalizeFiltersOutput = normalizeFilters(\n    {\n      priceSort,\n      priceThreshold,\n      keyWords,\n      saleThreshold,\n      scaler,\n      hasTouchedSlider,\n      brands,\n      ...searchFilters,\n    },\n    isSearchPage\n  );\n\n  return {\n    filterMethods,\n    filterState,\n    normalizedFilters,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}