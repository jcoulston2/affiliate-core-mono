{"ast":null,"code":"import * as zip from 'zipson';\nexport function fastClone(json) {\n  return JSON.parse(JSON.stringify(json));\n}\nexport const navigateToUrl = url => {\n  window.open(url, '_blank');\n};\nexport const navigateToPageRefresh = url => {\n  window.location.href = url;\n};\nexport function srcToHttp(url) {\n  if (typeof url !== 'string') return url;\n  return url !== null && url !== void 0 && url.startsWith('//') ? `https:${url}` : url;\n}\nexport function toArray(data) {\n  return Array.isArray(data) ? data : [data];\n}\nexport function toArrayNullable(data) {\n  return data ? toArray(data) : null;\n}\nexport function getSingle(prop) {\n  return Array.isArray(prop) ? prop[0] : prop;\n}\nexport function delayedCallback(cb, time) {\n  setTimeout(() => {\n    cb();\n  }, time);\n}\nexport function isDebug() {\n  var _window, _window$location, _window$location$sear;\n\n  return false && ((_window = window) === null || _window === void 0 ? void 0 : (_window$location = _window.location) === null || _window$location === void 0 ? void 0 : (_window$location$sear = _window$location.search) === null || _window$location$sear === void 0 ? void 0 : _window$location$sear.includes('debug'));\n}\nexport function isStringInt(str) {\n  return /^-?\\d+$/.test(str);\n}\nexport function isIos() {\n  if (!isServer()) {\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    return /iphone|ipad/.test(userAgent);\n  }\n}\nexport function isChrome() {\n  return !isServer() && !!navigator && /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n}\nexport function getIntFromPrice(str) {\n  const strMatch = str === null || str === void 0 ? void 0 : str.match(/\\d+\\.\\d+|\\d+/g);\n  return strMatch && strMatch[0] ? parseFloat(strMatch) : NaN;\n}\nexport function getCurrentPrice({\n  nowPrice,\n  price\n}) {\n  return getIntFromPrice(getSingle(nowPrice)) || getIntFromPrice(getSingle(price)) || NaN;\n}\nexport function getCalculatedDiscount(wasPrice, nowPrice) {\n  if (!wasPrice || !nowPrice) return null;\n\n  const priceIntMatch = int => int.match(/\\d+\\.\\d+|\\d+/g)[0];\n\n  const WasPriceInt = parseFloat(priceIntMatch(wasPrice));\n  const nowPriceInt = parseFloat(priceIntMatch(nowPrice));\n  return Math.round((WasPriceInt - nowPriceInt) / WasPriceInt * 100);\n}\nexport function getScrollTop() {\n  var _document, _document$scrollingEl;\n\n  return (_document = document) === null || _document === void 0 ? void 0 : (_document$scrollingEl = _document.scrollingElement) === null || _document$scrollingEl === void 0 ? void 0 : _document$scrollingEl.scrollTop;\n}\nexport function setScrollTop(value) {\n  const doc = document.scrollingElement;\n  if (doc) doc.scrollTop = value;\n}\nexport function stringifySafe(param) {\n  return param ? `${param}` : null;\n} // A little bit like Array.some but the result of the filter callback always needs to match the array item for the function to\n// return true. For example take the array ['foo', 'bar'], if the callback returns (item) => item === 'foo' || 'bar', the function\n// will return true and is a complate match. If (item) => item === 'foo', then the function would return false. (this differs from\n// .some (in this case it would return true)\n\nexport function commonMultiMatch(arr, cb) {\n  const validate = arr.filter(cb);\n  return validate.length === arr.length;\n}\nexport function getLocalStorage(key) {\n  try {\n    const storageKey = localStorage.getItem(key);\n    return JSON.parse(storageKey);\n  } catch (e) {\n    return null;\n  }\n}\nexport function setLocalStorage(key, value) {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (e) {}\n}\nexport function getNode(selector) {\n  var _document2;\n\n  return (_document2 = document) === null || _document2 === void 0 ? void 0 : _document2.querySelector(selector);\n}\nexport function getAllNodes(selector) {\n  return Array.from(document.querySelectorAll(selector));\n}\nexport function simpleStartCase(str) {\n  return str.replace(/-/g, ' ');\n} // some categories have spaces and '&' symbos which can cuase issues for querying un URL's. This just converts these terms into a safe\n// and url friendly format. Note for querying in the gql resolvers, references to the store will also need to be converted to this case\n// for matching\n\nexport function urlCase(str) {\n  var _str$replace, _str$replace$replace;\n\n  return (str === null || str === void 0 ? void 0 : (_str$replace = str.replace(/\\s&\\s/g, '-and-')) === null || _str$replace === void 0 ? void 0 : (_str$replace$replace = _str$replace.replace(/\\s/g, '-')) === null || _str$replace$replace === void 0 ? void 0 : _str$replace$replace.replace(/&/g, '|and|')) || str;\n}\nexport function urlReverseCase(str) {\n  var _str$replace2, _str$replace2$replace;\n\n  return typeof str === 'string' ? (str === null || str === void 0 ? void 0 : (_str$replace2 = str.replace(/-and-/g, ' & ')) === null || _str$replace2 === void 0 ? void 0 : (_str$replace2$replace = _str$replace2.replace(/-/g, ' ')) === null || _str$replace2$replace === void 0 ? void 0 : _str$replace2$replace.replace(/\\|and\\|/g, '&')) || str : str;\n}\nexport function urlCaseMatches(strA, strB, caseSensitive = true) {\n  if (caseSensitive) {\n    return urlCase(strA) === urlCase(strB);\n  } else {\n    return urlCase(strA).toLowerCase() === urlCase(strB).toLowerCase();\n  }\n}\nexport function keyWordsToString(keyWords) {\n  return keyWords.join(' ');\n}\nexport function isServer() {\n  return true;\n}\nexport function isInPwa() {\n  return !isServer() && window.matchMedia('(display-mode: standalone)').matches;\n}\nlet throttleControl = {};\nexport function betterThrottle(cb, time, key = 'default') {\n  const timeDiff = Date.now() - throttleControl[key];\n\n  if (!throttleControl[key] || timeDiff > (time || 1000)) {\n    cb();\n  }\n\n  throttleControl[key] = Date.now();\n}\nexport function getImg(src) {\n  const imgContext = require.context('@images', true);\n\n  const imageSrc = imgContext(`./${src}`).default;\n  return imageSrc;\n}\nexport function crossIncludes(str1, str2) {\n  return str1.includes(str2) || str2.includes(str1);\n}\nexport function createEvent(node, eventType, delay) {\n  const event = document.createEvent('MouseEvents');\n\n  if (node && eventType) {\n    setTimeout(() => {\n      event.initEvent(eventType, true, true);\n      node.dispatchEvent(event);\n    }, delay);\n  }\n}\nexport function urlContainsQuery(query) {\n  const urlQuery = window.location.search || '';\n  return urlQuery.includes(query);\n}\nexport function deDupeArray(ar) {\n  return [...new Set(ar)];\n}","map":{"version":3,"sources":["/Users/justincoulston/Desktop/affilaite-core-mono/packages/app/helpers/common/common.js"],"names":["zip","fastClone","json","JSON","parse","stringify","navigateToUrl","url","window","open","navigateToPageRefresh","location","href","srcToHttp","startsWith","toArray","data","Array","isArray","toArrayNullable","getSingle","prop","delayedCallback","cb","time","setTimeout","isDebug","search","includes","isStringInt","str","test","isIos","isServer","userAgent","navigator","toLowerCase","isChrome","vendor","getIntFromPrice","strMatch","match","parseFloat","NaN","getCurrentPrice","nowPrice","price","getCalculatedDiscount","wasPrice","priceIntMatch","int","WasPriceInt","nowPriceInt","Math","round","getScrollTop","document","scrollingElement","scrollTop","setScrollTop","value","doc","stringifySafe","param","commonMultiMatch","arr","validate","filter","length","getLocalStorage","key","storageKey","localStorage","getItem","e","setLocalStorage","setItem","getNode","selector","querySelector","getAllNodes","from","querySelectorAll","simpleStartCase","replace","urlCase","urlReverseCase","urlCaseMatches","strA","strB","caseSensitive","keyWordsToString","keyWords","join","isInPwa","matchMedia","matches","throttleControl","betterThrottle","timeDiff","Date","now","getImg","src","imgContext","require","context","imageSrc","default","crossIncludes","str1","str2","createEvent","node","eventType","delay","event","initEvent","dispatchEvent","urlContainsQuery","query","urlQuery","deDupeArray","ar","Set"],"mappings":"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","sourcesContent":["//@flow\nimport * as zip from 'zipson';\nimport { type CommonJson } from '../../types/other';\n\ndeclare var require: any;\n\nexport function fastClone(json: CommonJson): CommonJson {\n  return JSON.parse(JSON.stringify(json));\n}\n\nexport const navigateToUrl = (url: string): void => {\n  window.open(url, '_blank');\n};\n\nexport const navigateToPageRefresh = (url: string): void => {\n  window.location.href = url;\n};\n\nexport function srcToHttp(url: string): string {\n  if (typeof url !== 'string') return url;\n  return url?.startsWith('//') ? `https:${url}` : url;\n}\n\nexport function toArray(data: Array<string> | string): Array<string> {\n  return Array.isArray(data) ? data : [data];\n}\n\nexport function toArrayNullable(data: Array<string> | string): ?Array<string> {\n  return data ? toArray(data) : null;\n}\n\nexport function getSingle(prop: string | Array<string>): string {\n  return Array.isArray(prop) ? prop[0] : prop;\n}\n\nexport function delayedCallback(cb: Function, time: number): void {\n  setTimeout(() => {\n    cb();\n  }, time);\n}\n\nexport function isDebug(): boolean {\n  return typeof window !== 'undefined' && window?.location?.search?.includes('debug');\n}\n\nexport function isStringInt(str: string): boolean {\n  return /^-?\\d+$/.test(str);\n}\n\nexport function isIos(): ?boolean {\n  if (!isServer()) {\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    return /iphone|ipad/.test(userAgent);\n  }\n}\n\nexport function isChrome(): ?boolean {\n  return (\n    !isServer() &&\n    !!navigator &&\n    /Chrome/.test(navigator.userAgent) &&\n    /Google Inc/.test(navigator.vendor)\n  );\n}\n\nexport function getIntFromPrice(str: string): number {\n  const strMatch = str?.match(/\\d+\\.\\d+|\\d+/g);\n  return strMatch && strMatch[0] ? parseFloat(strMatch) : NaN;\n}\n\nexport function getCurrentPrice({ nowPrice, price }: { nowPrice: string, price: string }): number {\n  return getIntFromPrice(getSingle(nowPrice)) || getIntFromPrice(getSingle(price)) || NaN;\n}\n\nexport function getCalculatedDiscount(wasPrice: ?string, nowPrice: ?string): ?number {\n  if (!wasPrice || !nowPrice) return null;\n  const priceIntMatch = (int: any) => int.match(/\\d+\\.\\d+|\\d+/g)[0];\n  const WasPriceInt = parseFloat(priceIntMatch(wasPrice));\n  const nowPriceInt = parseFloat(priceIntMatch(nowPrice));\n  return Math.round(((WasPriceInt - nowPriceInt) / WasPriceInt) * 100);\n}\n\nexport function getScrollTop(): ?number {\n  return document?.scrollingElement?.scrollTop;\n}\n\nexport function setScrollTop(value: number): void {\n  const doc = document.scrollingElement;\n  if (doc) doc.scrollTop = value;\n}\n\nexport function stringifySafe(param: any): ?string {\n  return param ? `${param}` : null;\n}\n\n// A little bit like Array.some but the result of the filter callback always needs to match the array item for the function to\n// return true. For example take the array ['foo', 'bar'], if the callback returns (item) => item === 'foo' || 'bar', the function\n// will return true and is a complate match. If (item) => item === 'foo', then the function would return false. (this differs from\n// .some (in this case it would return true)\nexport function commonMultiMatch(arr: Array<any>, cb: Function): boolean {\n  const validate = arr.filter(cb);\n  return validate.length === arr.length;\n}\n\nexport function getLocalStorage(key: string): any {\n  try {\n    const storageKey: Object = localStorage.getItem(key);\n    return JSON.parse(storageKey);\n  } catch (e) {\n    return null;\n  }\n}\n\nexport function setLocalStorage(key: string, value: any): void {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (e) {}\n}\n\nexport function getNode(selector: string): any {\n  return document?.querySelector(selector);\n}\n\nexport function getAllNodes(selector: string): Array<any> {\n  return Array.from(document.querySelectorAll(selector));\n}\n\nexport function simpleStartCase(str: string): string {\n  return str.replace(/-/g, ' ');\n}\n\n// some categories have spaces and '&' symbos which can cuase issues for querying un URL's. This just converts these terms into a safe\n// and url friendly format. Note for querying in the gql resolvers, references to the store will also need to be converted to this case\n// for matching\nexport function urlCase(str: string): string {\n  return str?.replace(/\\s&\\s/g, '-and-')?.replace(/\\s/g, '-')?.replace(/&/g, '|and|') || str;\n}\n\nexport function urlReverseCase(str: string): string {\n  return typeof str === 'string'\n    ? str\n        ?.replace(/-and-/g, ' & ')\n        ?.replace(/-/g, ' ')\n        ?.replace(/\\|and\\|/g, '&') || str\n    : str;\n}\n\nexport function urlCaseMatches(strA: string, strB: string, caseSensitive: boolean = true): boolean {\n  if (caseSensitive) {\n    return urlCase(strA) === urlCase(strB);\n  } else {\n    return urlCase(strA).toLowerCase() === urlCase(strB).toLowerCase();\n  }\n}\n\nexport function keyWordsToString(keyWords: Array<string>): string {\n  return keyWords.join(' ');\n}\n\nexport function isServer(): boolean {\n  return typeof window === 'undefined';\n}\n\nexport function isInPwa(): boolean {\n  return !isServer() && window.matchMedia('(display-mode: standalone)').matches;\n}\n\nlet throttleControl = {};\nexport function betterThrottle(cb: function, time: number, key: string = 'default'): void {\n  const timeDiff = Date.now() - throttleControl[key];\n  if (!throttleControl[key] || timeDiff > (time || 1000)) {\n    cb();\n  }\n  throttleControl[key] = Date.now();\n}\n\nexport function getImg(src: string): any {\n  const imgContext = require.context('@images', true);\n  const imageSrc = imgContext(`./${src}`).default;\n\n  return imageSrc;\n}\n\nexport function crossIncludes(str1: string, str2: string): boolean {\n  return str1.includes(str2) || str2.includes(str1);\n}\n\nexport function createEvent(node: any, eventType: string, delay: number): void {\n  const event = document.createEvent('MouseEvents');\n  if (node && eventType) {\n    setTimeout(() => {\n      event.initEvent(eventType, true, true);\n      node.dispatchEvent(event);\n    }, delay);\n  }\n}\n\nexport function urlContainsQuery(query: string): boolean {\n  const urlQuery = window.location.search || '';\n  return urlQuery.includes(query);\n}\n\nexport function deDupeArray(ar: Array<any>): Array<any> {\n  return [...new Set(ar)];\n}\n"]},"metadata":{},"sourceType":"module"}