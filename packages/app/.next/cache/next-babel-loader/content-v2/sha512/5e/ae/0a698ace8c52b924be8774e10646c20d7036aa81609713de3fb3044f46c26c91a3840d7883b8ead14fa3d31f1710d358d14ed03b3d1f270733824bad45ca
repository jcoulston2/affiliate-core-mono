{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nvar _jsxFileName = \"/Users/justincoulston/Desktop/affilaite-core-mono/packages/app/components/units/ProductListingItem/ProductListingItem.js\";\nvar __jsx = React.createElement;\nimport React, { memo } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@units/Typography';\nimport { WasPriceCopy } from './styles';\nimport Chip from '@units/Chip';\nimport Card from '@units/Card';\nimport { StyledCmsGrid, Spacer } from '@styles/CommonStyledComponents';\nimport { ProductWishListAction } from '@modules/ProductWishList';\nimport startCase from 'lodash/startCase';\nimport { getSingle, getCalculatedDiscount } from '@helpers/common';\nimport { hasMinRequiredData, hasMoreColors, getFallbackImg } from './helper';\nimport { WishListActionWrapper } from './styles';\n\nfunction ProductListingItem({\n  topLevelData,\n  detailedData,\n  metaData,\n  productTitle,\n  productTileCard,\n  productTileCardDetails,\n  priceCopy,\n  newPriceCopy,\n  wasPriceCopy,\n  productTileCardContainer,\n  hasWishListAction,\n  hoverEffect,\n  onCardClick\n}) {\n  const {\n    image,\n    name,\n    price,\n    wasPrice,\n    nowPrice\n  } = topLevelData;\n  const hasReducedPrice = wasPrice && nowPrice;\n  const hasSinglePrice = !wasPrice && (nowPrice || price);\n  const validPrice = hasSinglePrice ? price || nowPrice : null;\n  const validWasPrice = hasReducedPrice ? wasPrice : null;\n  const validNowPrice = hasReducedPrice ? nowPrice : null;\n  const discountPercentage = getCalculatedDiscount(validWasPrice, validNowPrice);\n  const hasMoreColorVariants = hasMoreColors(detailedData);\n  const validatedImageSrc = image || getFallbackImg(topLevelData === null || topLevelData === void 0 ? void 0 : topLevelData.image);\n  if (!hasMinRequiredData(validatedImageSrc, name, validPrice, validNowPrice)) return null;\n  return __jsx(StyledCmsGrid, _extends({\n    container: true,\n    item: true\n  }, productTileCardContainer, productTileCardContainer.grid, {\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }), __jsx(Card, _extends({}, productTileCard, {\n    hoverEffect: hoverEffect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), hasWishListAction && __jsx(WishListActionWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, __jsx(ProductWishListAction, {\n    product: {\n      topLevelData,\n      detailedData,\n      metaData\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  })), __jsx(Grid, {\n    container: true,\n    onClick: onCardClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: validatedImageSrc,\n    alt: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  })), __jsx(StyledCmsGrid, _extends({\n    item: true,\n    container: true,\n    xs: 12\n  }, productTileCardDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), __jsx(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, discountPercentage && __jsx(Chip, {\n    label: `${discountPercentage}% OFF`,\n    size: \"small\",\n    bgColor: \"primary\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }), hasMoreColorVariants && __jsx(Chip, {\n    label: \"More colours\",\n    size: \"small\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 40\n    }\n  })), __jsx(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, __jsx(Typography, {\n    tag: \"h4\",\n    typeStyles: productTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, startCase(getSingle(name).toLowerCase()))), __jsx(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, hasSinglePrice && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    tag: \"p\",\n    typeStyles: priceCopy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, validPrice)), hasReducedPrice && __jsx(React.Fragment, null, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, __jsx(WasPriceCopy, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    tag: \"p\",\n    typeStyles: wasPriceCopy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }\n  }, validWasPrice))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, __jsx(Typography, {\n    tag: \"p\",\n    typeStyles: newPriceCopy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, validNowPrice)))))), __jsx(Spacer, {\n    h: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default /*#__PURE__*/memo(ProductListingItem);","map":{"version":3,"sources":["/Users/justincoulston/Desktop/affilaite-core-mono/packages/app/components/units/ProductListingItem/ProductListingItem.js"],"names":["React","memo","Grid","Typography","WasPriceCopy","Chip","Card","StyledCmsGrid","Spacer","ProductWishListAction","startCase","getSingle","getCalculatedDiscount","hasMinRequiredData","hasMoreColors","getFallbackImg","WishListActionWrapper","ProductListingItem","topLevelData","detailedData","metaData","productTitle","productTileCard","productTileCardDetails","priceCopy","newPriceCopy","wasPriceCopy","productTileCardContainer","hasWishListAction","hoverEffect","onCardClick","image","name","price","wasPrice","nowPrice","hasReducedPrice","hasSinglePrice","validPrice","validWasPrice","validNowPrice","discountPercentage","hasMoreColorVariants","validatedImageSrc","grid","toLowerCase"],"mappings":"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","sourcesContent":["//@flow\nimport React, { memo } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@units/Typography';\nimport { type CmsCopy, type CmsCard, type CmsCommonGridContainer } from '@types/cms';\nimport {\n  type ProductDetailedData,\n  type ProductTopLevelData,\n  type ProductMetaData,\n} from '@types/product';\n\nimport { WasPriceCopy } from './styles';\nimport Chip from '@units/Chip';\nimport Card from '@units/Card';\nimport { StyledCmsGrid, Spacer } from '@styles/CommonStyledComponents';\nimport { ProductWishListAction } from '@modules/ProductWishList';\nimport { type CmsResponsiveString, type CmsGrid } from '../../../types/cms';\nimport startCase from 'lodash/startCase';\nimport { getSingle, getCalculatedDiscount } from '@helpers/common';\nimport { hasMinRequiredData, hasMoreColors, getFallbackImg } from './helper';\nimport { WishListActionWrapper } from './styles';\n\ntype ProductListingItemProps = {\n  productTileCardContainer: $Exact<{\n    padding: CmsResponsiveString,\n    margin: CmsResponsiveString,\n    grid: CmsGrid,\n  }>,\n  productTitle: CmsCopy,\n  productsPerRowMobile: number,\n  newPriceCopy: CmsCopy,\n  priceCopy: CmsCopy,\n  wasPriceCopy: CmsCopy,\n  productTileCard: CmsCard,\n  productTileCardDetails: CmsCommonGridContainer,\n  topLevelData: ProductTopLevelData,\n  detailedData: ProductDetailedData,\n  metaData: ProductMetaData,\n  hasWishListAction: boolean,\n  hoverEffect?: 'grow' | 'raise' | 'tilt',\n  clickable: boolean,\n  onCardClick: Function,\n};\n\nfunction ProductListingItem({\n  topLevelData,\n  detailedData,\n  metaData,\n  productTitle,\n  productTileCard,\n  productTileCardDetails,\n  priceCopy,\n  newPriceCopy,\n  wasPriceCopy,\n  productTileCardContainer,\n  hasWishListAction,\n  hoverEffect,\n  onCardClick,\n}: ProductListingItemProps) {\n  const { image, name, price, wasPrice, nowPrice } = topLevelData;\n  const hasReducedPrice = wasPrice && nowPrice;\n  const hasSinglePrice = !wasPrice && (nowPrice || price);\n  const validPrice = hasSinglePrice ? price || nowPrice : null;\n  const validWasPrice = hasReducedPrice ? wasPrice : null;\n  const validNowPrice = hasReducedPrice ? nowPrice : null;\n  const discountPercentage = getCalculatedDiscount(validWasPrice, validNowPrice);\n  const hasMoreColorVariants = hasMoreColors(detailedData);\n  const validatedImageSrc = image || getFallbackImg(topLevelData?.image);\n\n  if (!hasMinRequiredData(validatedImageSrc, name, validPrice, validNowPrice)) return null;\n\n  return (\n    <StyledCmsGrid\n      container\n      item\n      {...productTileCardContainer}\n      {...productTileCardContainer.grid}\n      justify=\"center\">\n      <Card {...productTileCard} hoverEffect={hoverEffect}>\n        {hasWishListAction && (\n          <WishListActionWrapper>\n            <ProductWishListAction product={{ topLevelData, detailedData, metaData }} />\n          </WishListActionWrapper>\n        )}\n        <Grid container onClick={onCardClick}>\n          <Grid item xs={12}>\n            <img src={validatedImageSrc} alt={name} />\n          </Grid>\n          <StyledCmsGrid item container xs={12} {...productTileCardDetails}>\n            <Grid item container xs={12}>\n              {discountPercentage && (\n                <Chip\n                  label={`${discountPercentage}% OFF`}\n                  size=\"small\"\n                  bgColor=\"primary\"\n                  color=\"secondary\"\n                />\n              )}\n              {hasMoreColorVariants && <Chip label=\"More colours\" size=\"small\" color=\"secondary\" />}\n            </Grid>\n            <Grid item container xs={12}>\n              <Typography tag=\"h4\" typeStyles={productTitle}>\n                {startCase(getSingle(name).toLowerCase())}\n              </Typography>\n            </Grid>\n\n            <Grid container item xs={12}>\n              {hasSinglePrice && (\n                <Grid item xs={12}>\n                  <Typography tag=\"p\" typeStyles={priceCopy}>\n                    {validPrice}\n                  </Typography>\n                </Grid>\n              )}\n              {hasReducedPrice && (\n                <>\n                  <Grid item xs={12}>\n                    <WasPriceCopy>\n                      <Typography tag=\"p\" typeStyles={wasPriceCopy}>\n                        {validWasPrice}\n                      </Typography>\n                    </WasPriceCopy>\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Typography tag=\"p\" typeStyles={newPriceCopy}>\n                      {validNowPrice}\n                    </Typography>\n                  </Grid>\n                </>\n              )}\n            </Grid>\n          </StyledCmsGrid>\n        </Grid>\n        <Spacer h={4} />\n      </Card>\n    </StyledCmsGrid>\n  );\n}\n\nexport default memo<ProductListingItemProps>(ProductListingItem);\n"]},"metadata":{},"sourceType":"module"}