{"ast":null,"code":"/* eslint-disable no-console */\nimport { INVALID_PRICE, INVALID_IMG } from '@constants';\nimport { isDebug } from '@helpers/common';\nexport function isValidPrice(finalPrice) {\n  return !!finalPrice && /£\\d/.test(finalPrice);\n}\nexport function hasMoreColors(detailedData) {\n  var _detailedData$variant, _colorVariants$data;\n\n  const colorVariants = detailedData === null || detailedData === void 0 ? void 0 : (_detailedData$variant = detailedData.variants) === null || _detailedData$variant === void 0 ? void 0 : _detailedData$variant.find(variant => variant.variantText === 'Colors');\n  const numberOfVariants = (colorVariants === null || colorVariants === void 0 ? void 0 : (_colorVariants$data = colorVariants.data) === null || _colorVariants$data === void 0 ? void 0 : _colorVariants$data.length) || 0;\n  return numberOfVariants > 1;\n}\nexport function logInvalidPrice(name) {\n  if (isDebug()) {\n    console.log(`${INVALID_PRICE} name: ${name || 'null'}`);\n  }\n}\nexport function logInvalidImg(name, src) {\n  if (isDebug()) {\n    console.log(`${INVALID_IMG} name: ${name || 'null'} broken src: ${src || 'null'}}`);\n  }\n}\nexport function hasMinRequiredData(validatedImageSrc, name, validPrice, validNowPrice) {\n  if (!name) {\n    return false;\n  }\n\n  if (!validatedImageSrc) {\n    logInvalidImg(name, validatedImageSrc);\n    return false;\n  }\n\n  if (!(isValidPrice(validPrice) || isValidPrice(validNowPrice))) {\n    logInvalidPrice(name);\n    return false;\n  }\n\n  return true;\n}\nexport function getFallbackImg(topLevelDataImages) {\n  if (!(topLevelDataImages !== null && topLevelDataImages !== void 0 && topLevelDataImages.length)) return null;\n  if (!Array.isArray(topLevelDataImages)) return topLevelDataImages || null;\n  return topLevelDataImages[0] || null;\n}","map":{"version":3,"sources":["/Users/justincoulston/Desktop/affilaite-core-mono/packages/affiliate-app/components/units/ProductListingItem/helper.js"],"names":["INVALID_PRICE","INVALID_IMG","isDebug","isValidPrice","finalPrice","test","hasMoreColors","detailedData","colorVariants","variants","find","variant","variantText","numberOfVariants","data","length","logInvalidPrice","name","console","log","logInvalidImg","src","hasMinRequiredData","validatedImageSrc","validPrice","validNowPrice","getFallbackImg","topLevelDataImages","Array","isArray"],"mappings":"AACA;AACA,SAASA,aAAT,EAAwBC,WAAxB,QAA2C,YAA3C;AAEA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,OAAO,SAASC,YAAT,CAAsBC,UAAtB,EAAoD;AACzD,SAAO,CAAC,CAACA,UAAF,IAAgB,MAAMC,IAAN,CAAWD,UAAX,CAAvB;AACD;AAED,OAAO,SAASE,aAAT,CAAuBC,YAAvB,EAAmE;AAAA;;AACxE,QAAMC,aAAa,GAAGD,YAAH,aAAGA,YAAH,gDAAGA,YAAY,CAAEE,QAAjB,0DAAG,sBAAwBC,IAAxB,CAA8BC,OAAD,IAAaA,OAAO,CAACC,WAAR,KAAwB,QAAlE,CAAtB;AACA,QAAMC,gBAAgB,GAAG,CAAAL,aAAa,SAAb,IAAAA,aAAa,WAAb,mCAAAA,aAAa,CAAEM,IAAf,4EAAqBC,MAArB,KAA+B,CAAxD;AACA,SAAOF,gBAAgB,GAAG,CAA1B;AACD;AAED,OAAO,SAASG,eAAT,CAAyBC,IAAzB,EAA8C;AACnD,MAAIf,OAAO,EAAX,EAAe;AACbgB,IAAAA,OAAO,CAACC,GAAR,CAAa,GAAEnB,aAAc,UAASiB,IAAI,IAAI,MAAO,EAArD;AACD;AACF;AAED,OAAO,SAASG,aAAT,CAAuBH,IAAvB,EAAsCI,GAAtC,EAA0D;AAC/D,MAAInB,OAAO,EAAX,EAAe;AACbgB,IAAAA,OAAO,CAACC,GAAR,CAAa,GAAElB,WAAY,UAASgB,IAAI,IAAI,MAAO,gBAAeI,GAAG,IAAI,MAAO,GAAhF;AACD;AACF;AAED,OAAO,SAASC,kBAAT,CACLC,iBADK,EAELN,IAFK,EAGLO,UAHK,EAILC,aAJK,EAKI;AACT,MAAI,CAACR,IAAL,EAAW;AACT,WAAO,KAAP;AACD;;AAED,MAAI,CAACM,iBAAL,EAAwB;AACtBH,IAAAA,aAAa,CAACH,IAAD,EAAOM,iBAAP,CAAb;AACA,WAAO,KAAP;AACD;;AAED,MAAI,EAAEpB,YAAY,CAACqB,UAAD,CAAZ,IAA4BrB,YAAY,CAACsB,aAAD,CAA1C,CAAJ,EAAgE;AAC9DT,IAAAA,eAAe,CAACC,IAAD,CAAf;AACA,WAAO,KAAP;AACD;;AAED,SAAO,IAAP;AACD;AAED,OAAO,SAASS,cAAT,CAAwBC,kBAAxB,EAA6E;AAClF,MAAI,EAACA,kBAAD,aAACA,kBAAD,eAACA,kBAAkB,CAAEZ,MAArB,CAAJ,EAAiC,OAAO,IAAP;AACjC,MAAI,CAACa,KAAK,CAACC,OAAN,CAAcF,kBAAd,CAAL,EAAwC,OAAOA,kBAAkB,IAAI,IAA7B;AACxC,SAAOA,kBAAkB,CAAC,CAAD,CAAlB,IAAyB,IAAhC;AACD","sourcesContent":["//@flow\n/* eslint-disable no-console */\nimport { INVALID_PRICE, INVALID_IMG } from '@constants';\nimport { type ProductDetailedData } from '@types/product';\nimport { isDebug } from '@helpers/common';\n\nexport function isValidPrice(finalPrice: ?string): boolean {\n  return !!finalPrice && /£\\d/.test(finalPrice);\n}\n\nexport function hasMoreColors(detailedData: ProductDetailedData): boolean {\n  const colorVariants = detailedData?.variants?.find((variant) => variant.variantText === 'Colors');\n  const numberOfVariants = colorVariants?.data?.length || 0;\n  return numberOfVariants > 1;\n}\n\nexport function logInvalidPrice(name: ?string): void {\n  if (isDebug()) {\n    console.log(`${INVALID_PRICE} name: ${name || 'null'}`);\n  }\n}\n\nexport function logInvalidImg(name: ?string, src: ?string): void {\n  if (isDebug()) {\n    console.log(`${INVALID_IMG} name: ${name || 'null'} broken src: ${src || 'null'}}`);\n  }\n}\n\nexport function hasMinRequiredData(\n  validatedImageSrc: ?string,\n  name: ?string,\n  validPrice: ?string,\n  validNowPrice: ?string\n): boolean {\n  if (!name) {\n    return false;\n  }\n\n  if (!validatedImageSrc) {\n    logInvalidImg(name, validatedImageSrc);\n    return false;\n  }\n\n  if (!(isValidPrice(validPrice) || isValidPrice(validNowPrice))) {\n    logInvalidPrice(name);\n    return false;\n  }\n\n  return true;\n}\n\nexport function getFallbackImg(topLevelDataImages: Array<string> | string): ?string {\n  if (!topLevelDataImages?.length) return null;\n  if (!Array.isArray(topLevelDataImages)) return topLevelDataImages || null;\n  return topLevelDataImages[0] || null;\n}\n"]},"metadata":{},"sourceType":"module"}