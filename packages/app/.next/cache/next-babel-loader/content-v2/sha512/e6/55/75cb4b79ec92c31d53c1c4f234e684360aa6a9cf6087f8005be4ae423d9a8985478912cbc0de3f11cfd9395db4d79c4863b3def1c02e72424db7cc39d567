{"ast":null,"code":"import Cors from 'cors';\nimport { API_WHITELIST } from '@constants/secrets';\nconst whitelist = JSON.parse(API_WHITELIST);\nconst corsConfig = {\n  origin: (origin, cb) => {\n    if (!whitelist.length || whitelist.includes(origin)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Accessing this API is not allowed'));\n    }\n  }\n};\nexport function createMiddleware(middleware) {\n  return (req, res) => new Promise((resolve, reject) => {\n    middleware(req, res, result => {\n      if (result instanceof Error) {\n        return reject(result);\n      }\n\n      return resolve(result);\n    });\n  });\n}\nexport const baseMiddleware = createMiddleware(Cors(corsConfig));","map":null,"metadata":{},"sourceType":"module"}