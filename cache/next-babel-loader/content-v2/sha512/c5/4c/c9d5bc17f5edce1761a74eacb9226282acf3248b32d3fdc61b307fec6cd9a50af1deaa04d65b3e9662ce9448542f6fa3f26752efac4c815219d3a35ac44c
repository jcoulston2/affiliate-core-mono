{"ast":null,"code":"import _defineProperty from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SEARCH_PATH, PLP_PATH, INVALID_FILTER_PATH } from '@constants';\nimport { isStringInt, navigateToPageRefresh } from '@helpers/common';\nimport { getSearchQueryFromUrl } from '@helpers/page';\nimport camelCase from 'lodash/camelCase';\nvar validFilters = ['price-sort', 'price-threshold-low', 'price-threshold-high', 'key-words', 'sale-threshold', 'brands', 'section', 'category'];\nexport function toFilterArray(str) {\n  return str.replace(/\\s/g, '').split('&');\n}\nexport function normalizeFilterValue(value) {\n  if (value.includes(',')) {\n    return value.split(',');\n  } else if (isStringInt(value)) {\n    return parseInt(value);\n  } else {\n    return value;\n  }\n}\nexport function getFilterValues(filterkey, filterValues) {\n  if (filterkey === 'filter' && filterValues) {\n    return toFilterArray(filterValues).reduce(function (acc, cur) {\n      var _cur$split = cur.split('='),\n          _cur$split2 = _slicedToArray(_cur$split, 2),\n          key = _cur$split2[0],\n          value = _cur$split2[1];\n\n      return validFilters.includes(key) ? _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, camelCase(key), normalizeFilterValue(value))) : acc;\n    }, {});\n  } else if (!filterkey) {\n    return {};\n  } else {\n    throw INVALID_FILTER_PATH;\n  }\n}\nexport function getFilterValuesFromSearchUrl(searchTerms) {\n  return Object.keys(searchTerms).reduce(function (acc, cur) {\n    var value = normalizeFilterValue(searchTerms[cur]);\n    return validFilters.includes(cur) ? _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, camelCase(cur), value)) : acc;\n  }, {});\n}\nexport function getFiltersFromUrl() {\n  if (false) return null;\n\n  var _ref = window.location.href.match(/\\/filter\\/(.*)|\\/params?(.*)/g) || [],\n      _ref2 = _slicedToArray(_ref, 1),\n      filterMatch = _ref2[0];\n\n  var urlFilterValues = filterMatch && filterMatch.replace(/\\/filter\\/|\\/params\\?/, '');\n  return urlFilterValues ? getFilterValues('filter', urlFilterValues) : null;\n}\nexport function getFilterPlpBasePath(router) {\n  var isSearchPage = router.pathname.includes(SEARCH_PATH);\n\n  if (isSearchPage) {\n    return \"/\".concat(SEARCH_PATH).concat(getSearchQueryFromUrl(router));\n  } else {\n    var _router$query$slug = _slicedToArray(router.query.slug, 2),\n        section = _router$query$slug[0],\n        productType = _router$query$slug[1];\n\n    return \"/\".concat(PLP_PATH, \"/\").concat(section, \"/\").concat(productType, \"/filter/\");\n  }\n}\nexport function pushFilterPlpBasePath(router) {\n  var basePath = getFilterPlpBasePath(router);\n  navigateToPageRefresh(basePath);\n}","map":null,"metadata":{},"sourceType":"module"}