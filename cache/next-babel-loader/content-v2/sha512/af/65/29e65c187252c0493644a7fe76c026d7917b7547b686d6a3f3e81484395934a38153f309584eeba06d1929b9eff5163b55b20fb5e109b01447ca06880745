{"ast":null,"code":"import _defineProperty from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { normalizeFilters } from '@modules/Filters/helper';\nimport { useCms } from '@hooks';\nimport { toArrayNullable, stringifySafe } from '@helpers/common';\nimport { useRouter } from 'next/router';\nimport { isSearch } from './helper';\nexport default function useFilters(defaults) {\n  var router = useRouter();\n  var isSearchPage = isSearch(router);\n\n  var _useCms = useCms('listingContent'),\n      productFiltersContent = _useCms.productFiltersContent;\n\n  var scaler = productFiltersContent.sliderPriceScaleMultiplier;\n\n  var _useState = useState(false),\n      filterDrawOpen = _useState[0],\n      setFilterDrawOpen = _useState[1];\n\n  var _useState2 = useState('recommended'),\n      priceSort = _useState2[0],\n      setPriceSort = _useState2[1];\n\n  var _useState3 = useState([]),\n      keyWords = _useState3[0],\n      setKeyWords = _useState3[1];\n\n  var _useState4 = useState(null),\n      saleThreshold = _useState4[0],\n      setSaleThreshold = _useState4[1];\n\n  var _useState5 = useState(null),\n      hasTouchedSlider = _useState5[0],\n      setHasTouchedSlider = _useState5[1];\n\n  var _useState6 = useState(false),\n      filterRefresh = _useState6[0],\n      triggerFilterRefresh = _useState6[1];\n\n  var _useState7 = useState([0, 100]),\n      priceThreshold = _useState7[0],\n      setPriceThreshold = _useState7[1];\n\n  var _useState8 = useState([]),\n      brands = _useState8[0],\n      setBrands = _useState8[1];\n\n  var _useState9 = useState([]),\n      category = _useState9[0],\n      setCategory = _useState9[1];\n\n  var _useState10 = useState(null),\n      section = _useState10[0],\n      setSection = _useState10[1];\n\n  var setDefaultFilters = function setDefaultFilters() {\n    if (!defaults) return;\n    setHasTouchedSlider(!!(defaults.priceThresholdLow || defaults.priceThresholdHigh));\n    setPriceSort(defaults.priceSort || 'recommended');\n    setKeyWords(toArrayNullable(defaults.keyWords) || []);\n    setSaleThreshold(stringifySafe(defaults.saleThreshold));\n    setBrands(toArrayNullable(defaults.brands) || []);\n    setCategory(toArrayNullable(defaults.category) || []);\n    setSection(defaults.section || null);\n    setPriceThreshold([parseInt(defaults.priceThresholdLow) / scaler || 0, parseInt(defaults.priceThresholdHigh) / scaler || 100]);\n  };\n\n  useEffect(function () {\n    setDefaultFilters();\n  }, [defaults]);\n  var searchFilters = isSearchPage ? {\n    category: category,\n    section: section\n  } : {};\n  var filterMethods = {\n    setPriceSort: setPriceSort,\n    setPriceThreshold: setPriceThreshold,\n    setKeyWords: setKeyWords,\n    setSaleThreshold: setSaleThreshold,\n    setFilterDrawOpen: setFilterDrawOpen,\n    setHasTouchedSlider: setHasTouchedSlider,\n    triggerFilterRefresh: triggerFilterRefresh,\n    setBrands: setBrands,\n    setCategory: setCategory,\n    setSection: setSection\n  };\n\n  var filterState = _objectSpread({\n    filterDrawOpen: filterDrawOpen,\n    priceSort: priceSort,\n    keyWords: keyWords,\n    saleThreshold: saleThreshold,\n    hasTouchedSlider: hasTouchedSlider,\n    filterRefresh: filterRefresh,\n    priceThreshold: priceThreshold,\n    brands: brands\n  }, searchFilters);\n\n  var normalizedFilters = normalizeFilters(_objectSpread({\n    priceSort: priceSort,\n    priceThreshold: priceThreshold,\n    keyWords: keyWords,\n    saleThreshold: saleThreshold,\n    scaler: scaler,\n    hasTouchedSlider: hasTouchedSlider,\n    brands: brands\n  }, searchFilters), isSearchPage);\n  return {\n    filterMethods: filterMethods,\n    filterState: filterState,\n    normalizedFilters: normalizedFilters\n  };\n}","map":null,"metadata":{},"sourceType":"module"}