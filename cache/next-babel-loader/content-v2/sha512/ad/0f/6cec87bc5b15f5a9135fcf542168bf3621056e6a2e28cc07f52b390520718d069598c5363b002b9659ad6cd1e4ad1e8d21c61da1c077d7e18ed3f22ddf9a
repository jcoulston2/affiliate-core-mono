{"ast":null,"code":"import _asyncToGenerator from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport { actions } from './root-actions';\nimport { wrapper } from './store';\nimport { useDispatch } from 'react-redux';\nimport SiteThemeProvider from '@styles/SiteThemeProvider';\nimport { CmsProvider } from '../app/CmsContext';\nimport { IS_DEV } from '@constants';\nimport { injectLocalCms } from '@helpers/cms';\nimport { useSelector } from 'react-redux';\n\nfunction Root(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (store) {\n    var _store$buildTimeState;\n\n    return ((_store$buildTimeState = store.buildTimeState) === null || _store$buildTimeState === void 0 ? void 0 : _store$buildTimeState.cmsData) || {\n      cms: {}\n    };\n  }),\n      cms = _useSelector.cms;\n\n  var _useState = useState(cms),\n      appCms = _useState[0],\n      setAppCms = _useState[1];\n\n  var setLocalCms = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var localCms;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return injectLocalCms();\n\n            case 2:\n              localCms = _context.sent;\n              setAppCms(localCms);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function setLocalCms() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClientWidthOnResize = function handleClientWidthOnResize() {\n    var timedFn;\n\n    var initResize = function initResize() {\n      timedFn = setTimeout(function () {\n        var _document, _document$body;\n\n        var clientWidth = (_document = document) === null || _document === void 0 ? void 0 : (_document$body = _document.body) === null || _document$body === void 0 ? void 0 : _document$body.clientWidth;\n\n        if (clientWidth) {\n          dispatch(actions.setClientWidth(clientWidth));\n        }\n      }, 200);\n    };\n\n    window.addEventListener('resize', function () {\n      clearTimeout(timedFn);\n      initResize();\n    });\n    initResize();\n  };\n\n  useEffect(function () {\n    handleClientWidthOnResize();\n\n    if (IS_DEV) {\n      setLocalCms();\n    }\n  }, []);\n  return __jsx(CmsProvider, {\n    cms: appCms\n  }, __jsx(SiteThemeProvider, null, __jsx(Component, pageProps)));\n}\n\nexport default wrapper.withRedux(Root);","map":null,"metadata":{},"sourceType":"module"}