{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport styled, { keyframes } from 'styled-components';\nimport { useWishListAction } from '@hooks';\nimport { isServer } from '@helpers/common';\nimport { getSavedPoductLinks } from './helper';\nexport const wishListAnimation = keyframes([\"0%{transform:scale(0);}50%{transform:scale(2.2);}100%{transform:scale(0);}\"]);\nconst WishListButton = styled(FavoriteIcon).withConfig({\n  displayName: \"ProductWishListAction__WishListButton\",\n  componentId: \"sc-1ade7hd-0\"\n})([\"&&{font-size:\", \";cursor:pointer;&:hover{opacity:0.5;}}\"], props => props.fontSize);\nconst WishListAnimation = styled(FavoriteIcon).withConfig({\n  displayName: \"ProductWishListAction__WishListAnimation\",\n  componentId: \"sc-1ade7hd-1\"\n})([\"position:absolute;animation-name:\", \";animation-duration:0.5s;\"], wishListAnimation);\nexport default function ProductWishListAction({\n  product,\n  iconSize\n}) {\n  const {\n    0: wishListAnimate,\n    1: setWishListAnimate\n  } = useState(false);\n  const {\n    0: wishListAdded,\n    1: setWishListAdded\n  } = useState(false);\n  const {\n    link\n  } = product.topLevelData;\n  const savedProducts = useSelector(store => {\n    var _store$wishListState;\n\n    return (_store$wishListState = store.wishListState) === null || _store$wishListState === void 0 ? void 0 : _store$wishListState.savedProducts;\n  });\n  const savedProductLinks = getSavedPoductLinks(savedProducts);\n  const isSaved = savedProductLinks === null || savedProductLinks === void 0 ? void 0 : savedProductLinks.includes(link);\n  const wishListAction = useWishListAction(isSaved ? 'remove' : 'add');\n  const isClient = !isServer();\n\n  const wishListOnClick = () => {\n    if (!wishListAnimate) setWishListAnimate(true);\n    wishListAction(product);\n    setTimeout(() => {\n      setWishListAnimate(false);\n    }, 500);\n  }; // The wishlist or \"saved products\" is persisted in browser local storage. This will not be accessible during build time, this\n  // means we'll have to rely on client side logic to detect whether a product has already been added to the wishlist. We do this\n  // in the following useEffect, ensuring these checks are invoked on the client only\n\n\n  useEffect(() => {\n    if (isClient) setWishListAdded(isSaved);\n  }, [isSaved]);\n  return __jsx(React.Fragment, null, wishListAnimate && __jsx(WishListAnimation, null), __jsx(WishListButton, {\n    isSaved: isSaved,\n    fontSize: iconSize || '32px',\n    onClick: wishListOnClick,\n    color: wishListAdded ? 'primary' : 'inherit'\n  }));\n}","map":null,"metadata":{},"sourceType":"module"}