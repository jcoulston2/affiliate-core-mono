{"ast":null,"code":"import _toConsumableArray from \"/Users/justincoulston/Desktop/affilaite-core-mono/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { urlCase, isServer } from '@helpers/common';\nexport function structureNavigationData(sectionItem) {\n  return sectionItem.data.map(function (_ref) {\n    var label = _ref.label;\n    return {\n      title: label,\n      subNavItems: sectionItem.data.filter(function (catlevel) {\n        return catlevel.label === label;\n      }).map(function (_ref2) {\n        var category = _ref2.category;\n        return {\n          title: category,\n          link: urlCase(\"/\".concat(sectionItem.section, \"/\").concat(category))\n        };\n      })\n    };\n  });\n}\nexport function normalizeNavigationData(structuredCatLevelData) {\n  return structuredCatLevelData.reduce(function (acc, current) {\n    return [].concat(_toConsumableArray(acc), [acc && acc.some(function (has) {\n      return has.title === current.title;\n    }) ? null : current]);\n  }, []).filter(function (notNull) {\n    return notNull;\n  });\n}\nexport function getNavigationProps(rawApiResponse) {\n  if (!rawApiResponse) return null;\n  var affiliateData = rawApiResponse.affiliateData;\n  var normalizedNavData = affiliateData.map(function (sectionItem) {\n    var structuredCatLevelData = structureNavigationData(sectionItem);\n    var normalizedCatLevelData = normalizeNavigationData(structuredCatLevelData);\n    return {\n      title: sectionItem.section,\n      link: \"/\".concat(sectionItem.section),\n      subNav: normalizedCatLevelData\n    };\n  });\n  return {\n    affiliateData: normalizedNavData\n  };\n}\nexport function pushState(state, title, url) {\n  var _window$history;\n\n  if ((_window$history = window.history) !== null && _window$history !== void 0 && _window$history.pushState) {\n    window.history.pushState(state, state, url);\n  }\n}\nvar pushDefault = !isServer() && window.onpopstate;\nexport function defatulPopState() {\n  if (!isServer() && window.onpopstate) {\n    window.onpopstate = pushDefault;\n  }\n}\nexport function fixPopState() {\n  if (!isServer() && window.history && window.onpopstate) {\n    window.history.pushState(null, null, location.href);\n    window.history.back();\n    window.history.forward();\n\n    window.onpopstate = function () {\n      history.go(1);\n    };\n  }\n}","map":null,"metadata":{},"sourceType":"module"}